{% include 'header.html' %}
{% include 'navbar.html' %}

<div class="container" style="margin-top: 64px;">
  <h1>Lottery</h1>
  {% if current_user.is_admin %}
  <div class="card"
    style="margin: auto; margin-bottom: 32px; background-image: url('/static/images/ether.svg'); background-repeat: no-repeat; background-position: center; background-size: contain;">
    <div class="card-header">
      <h5 class="card-title">Manage lottery</h5>
    </div>
    <div class="card-body">
      <!-- create button to open the lottery -->
      <a href="lottery/create-lottery">
        <button type="button" class="btn-rounded">
          Open lottery
        </button>
      </a>
      <hr>
      <!-- create button to open a round of the lottery -->
      <a href="lottery/open-round">
        <button type="button" class="btn-rounded">
          Open round
        </button>
      </a>
      <hr>
      <!-- create button to close the lottery -->
      <a href="lottery/close-lottery">
        <button type="button" class="btn-rounded">
          Close lottery
        </button>
      </a>
      <hr>
      <!-- create button to extract the winning ticket -->
      <a href="lottery/extract-winning-ticket">
        <button type="button" class="btn-rounded">
          Extract winning ticket
        </button>
      </a>
      <hr>
      <!-- create button to give the prizes -->
      <a href="lottery/give-prizes">
        <button type="button" class="btn-rounded">
          Give prizes
        </button>
    </div>
  </div>

  <!-- normal user -->
  {% else %}

  <!-- check if the user is interested in lottery -->
  {% if not session.get('starting_block') %}
  <div class="card"
    style="margin: auto; margin-bottom: 32px; background-image: url('/static/images/ether.svg'); background-repeat: no-repeat; background-position: center; background-size: contain;">
    <div class="card-header">
      <h5 class="card-title">Register to lottery</h5>
      <h6 class="card-title">Ticket price: 1 ETH</h6>
    </div>
    <div class="card-body">
      You will receive a notification when the lottery is open.
    </div>
    <div class="card-footer">
      <a href="{{ url_for('lottery.register_user') }}">
        <button type="button" class="btn-rounded">
          Register to lottery
        </button>
      </a>
    </div>
  </div>

  <!-- check if the lottery is open -->
  {% elif not is_open %}
  <div class="card"
    style="margin: auto; margin-bottom: 32px; background-image: url('/static/images/ether.svg'); background-repeat: no-repeat; background-position: center; background-size: contain;">
    <div class="card-header">
      <h5 class="card-title">Lottery is closed</h5>
    </div>
    <div class="card-body">
      You will receive a notification when the lottery is open.
    </div>
  </div>

  <!-- user is interested in lottery and lottery open -->
  {% else %}
  <div class="card"
    style="margin: auto; margin-bottom: 32px; background-image: url('/static/images/ether.svg'); background-repeat: no-repeat; background-position: center; background-size: contain;">
    <div class="card-header">
      <h5 class="card-title">Buy ticket</h5>
      <h6 class="card-title">Ticket price: 1 ETH</h6>
    </div>
    <!-- create an inline form to buy a ticket -->
    <div class="card-body">
      <form method="post" action="lottery/buy-ticket">

        <div class="form-group row">
          <label for="one" class="col-sm-2 col-form-label">one</label>
          <div class="col-sm-10">
            <input type="number" min="1" max="69" class="form-control" id="one" name="one" placeholder="One">
          </div>
        </div>


        <div class="form-group row">
          <label for="two" class="col-sm-2 col-form-label">two</label>
          <div class="col-sm-10">
            <input type="number" min="1" max="69" class="form-control" id="two" name="two" placeholder="Two">
          </div>
        </div>

        <div class="form-group row">
          <label for="three" class="col-sm-2 col-form-label">three</label>
          <div class="col-sm-10">
            <input type="number" min="1" max="69" class="form-control" id="three" name="three" placeholder="Three">
          </div>
        </div>

        <div class="form-group row">
          <label for="four" class="col-sm-2 col-form-label">four</label>
          <div class="col-sm-10">
            <input type="number" min="1" max="69" class="form-control" id="four" name="four" placeholder="Four">
          </div>
        </div>

        <div class="form-group row">
          <label for="five" class="col-sm-2 col-form-label">five</label>
          <div class="col-sm-10">
            <input type="number" min="1" max="69" class="form-control" id="five" name="five" placeholder="Five">
          </div>
        </div>

        <div class="form-group row">
          <label for="powerball" class="col-sm-2 col-form-label">powerball</label>
          <div class="col-sm-10">
            <input type="number" min="1" max="26" class="form-control" id="powerball" name="powerball"
              placeholder="Powerball">
          </div>
        </div>


        <div class="form-group row" style="text-align: right;">
          <div class="col-sm-10">
            <button type="submit" class="btn-rounded">Buy</button>
          </div>
        </div>
      </form>
    </div>
    {% endif %}
    {% endif %}
  </div>
</div>